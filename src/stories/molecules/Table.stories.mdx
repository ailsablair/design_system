import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import { Table } from './Table';

<Meta title="Molecules/Table/Documentation" />

# Table Components

The Table building blocks provide a comprehensive set of components for displaying tabular data with rich interactions and multiple visual states.

## Overview

The table system follows atomic design principles:

- **Atoms**: `TableRow` and `TableCell` - Basic building blocks
- **Molecules**: `Table` - Complete table with header, body, and features

## Live Examples

### Basic Table

<Canvas>
  <Story name="Basic Example">
    <Table 
      columns={[
        { key: 'name', title: 'Name' },
        { key: 'status', title: 'Status', type: 'status' },
        { key: 'email', title: 'Email' },
      ]} 
      data={[
        { id: '1', name: 'John Doe', status: 'active', email: 'john@example.com' },
        { id: '2', name: 'Jane Smith', status: 'pending', email: 'jane@example.com' },
        { id: '3', name: 'Bob Johnson', status: 'inactive', email: 'bob@example.com' },
      ]} 
      showSelection 
      showActions 
    />
  </Story>
</Canvas>

### Interactive Table with Selection

<Canvas>
  <Story name="Interactive Example">
    <Table 
      columns={[
        { key: 'name', title: 'Name' },
        { key: 'status', title: 'Status', type: 'status' },
        { key: 'role', title: 'Role' },
      ]} 
      data={[
        { id: '1', name: 'Alice Cooper', status: 'active', role: 'Admin' },
        { id: '2', name: 'David Miller', status: 'pending', role: 'User' },
        { id: '3', name: 'Sarah Wilson', status: 'active', role: 'Editor' },
        { id: '4', name: 'Mike Brown', status: 'inactive', role: 'User' },
      ]} 
      showSelection 
      showActions 
      selectedRows={['1', '3']}
    />
  </Story>
</Canvas>

## Components

### TableRow (Atom)
A table row component with selection, actions, and multiple states.

**Features:**
- Selection checkbox
- Action buttons (edit, delete, duplicate)
- Visual states (default, hover, selected, disabled)
- Size variants (compact, default, comfortable)
- Status indicators

### TableCell (Atom)
Individual cell component used within table rows.

**Features:**
- Text alignment options
- Status indicators with color-coded dots
- Custom width support
- Content type variants

### Table (Molecule)
Complete table component built using TableRow and TableCell atoms.

**Features:**
- Column configuration with custom renderers
- Bulk row selection with "select all"
- Interactive action buttons
- Loading and empty states
- Responsive design
- Size variants
- Accessibility support

## Usage Examples

### Basic Table
```tsx
import { Table } from './molecules/Table';

const columns = [
  { key: 'name', title: 'Name' },
  { key: 'status', title: 'Status', type: 'status' },
];

const data = [
  { id: '1', name: 'John Doe', status: 'active' },
  { id: '2', name: 'Jane Smith', status: 'pending' },
];

<Table 
  columns={columns} 
  data={data} 
  showSelection 
  showActions 
/>
```

### Custom Rendering
```tsx
const columns = [
  {
    key: 'user',
    title: 'User',
    render: (value, record) => (
      <div>
        <strong>{value}</strong>
        <br />
        <small>{record.email}</small>
      </div>
    ),
  },
];
```

### Interactive Table
```tsx
const [selectedRows, setSelectedRows] = useState([]);

<Table
  columns={columns}
  data={data}
  selectedRows={selectedRows}
  onSelectionChange={setSelectedRows}
  onEdit={(record) => console.log('Edit:', record)}
  onDelete={(record) => console.log('Delete:', record)}
  onDuplicate={(record) => console.log('Duplicate:', record)}
/>
```

## Design Tokens

The components use the design system's tokens for consistent styling:

- **Spacing**: Uses `--spacing-sizing-*` tokens for padding and dimensions
- **Colors**: Uses semantic color tokens for status indicators and states
- **Typography**: Uses `--type-*` tokens for consistent text styling
- **Borders**: Uses `--spacing-radius-*` and `--spacing-stroke-*` tokens

## States

### Row States
- **Default**: Normal appearance
- **Hover**: Highlighted background on mouse over
- **Selected**: Blue background with checkbox checked
- **Disabled**: Reduced opacity, no interactions

### Status Indicators
- **Active**: Green dot and text
- **Inactive**: Gray dot and text  
- **Pending**: Yellow dot and text
- **Error**: Red dot and text
- **Success**: Green dot and text

## Accessibility

The components include:
- Proper ARIA labels
- Keyboard navigation support
- Screen reader compatibility
- High contrast mode support
- Focus indicators

## Responsive Design

Tables adapt to different screen sizes:
- **Desktop**: Full feature set with all columns visible
- **Tablet**: Horizontal scrolling for overflow content
- **Mobile**: Compressed spacing and smaller action buttons

## Building Block Integration

These table components follow the Figma design patterns and integrate seamlessly with the existing design system:

- Uses the same Icon component for action buttons
- Consistent with Input and other form components
- Follows the same naming conventions and structure
- Compatible with existing CSS tokens and variables

The table components are designed to be flexible building blocks that can be combined and customized for various data display needs while maintaining design consistency.
